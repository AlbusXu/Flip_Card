<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆè®°å½• - å¤ªç©ºæ¢é™©è®°å¿†ç¿»ç¿»ä¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            min-height: 100vh;
            padding: 20px;
            color: #ffffff;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 25px;
            padding-top: 10px;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #e6f7ff;
            font-size: 16px;
            opacity: 0.8;
        }
        
        .no-records {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .no-records-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        .no-records-text {
            font-size: 18px;
            color: #e6f7ff;
            margin-bottom: 25px;
        }
        
        .button {
            display: inline-block;
            padding: 12px 25px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .button:active {
            transform: scale(0.95);
        }
        
        .records-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .record-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .record-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .record-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }
        
        .record-date {
            font-weight: 500;
            font-size: 14px;
            opacity: 0.8;
        }
        
        .record-difficulty {
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 14px;
        }
        
        .difficulty-explore {
            background-color: #4CAF50;
        }
        
        .difficulty-adventure {
            background-color: #FF9800;
        }
        
        .difficulty-challenge {
            background-color: #F44336;
        }
        
        .record-total-time {
            font-weight: 600;
            font-size: 22px;
            color: #e6f7ff;
            margin: 5px 0;
        }
        
        .record-stars {
            margin: 10px 0;
            font-size: 22px;
        }
        
        .record-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 8px;
        }
        
        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .stat-value {
            font-size: 16px;
            font-weight: 500;
            margin-top: 3px;
        }
        
        .record-rank {
            position: absolute;
            top: 0;
            right: 0;
            background: #5ac8fa;
            color: white;
            padding: 6px 15px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 0 12px 0 12px;
        }
        
        .record-status {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 12px;
            font-weight: 600;
            border-radius: 10px;
            padding: 3px 8px;
        }
        
        .status-success {
            background-color: rgba(76, 175, 80, 0.3);
            color: #4CAF50;
        }
        
        .status-failure {
            background-color: rgba(244, 67, 54, 0.3);
            color: #F44336;
        }
        
        .controls {
            text-align: center;
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .secondary-button {
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: none;
        }
        
        /* å›¾è¡¨æ ·å¼ */
        .charts-container {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }
        
        .chart-title {
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="page-header">
        <h1>å¤ªç©ºæ¢é™©è®°å½•</h1>
        <p class="subtitle">æŸ¥çœ‹ä½ çš„æ¢é™©å†å²å’Œæœ€ä½³æˆç»©</p>
    </div>
    
    <div id="records-container">
        <!-- è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
    </div>
    
    <div class="controls">
        <button class="button" id="back-to-game">è¿”å›æ¸¸æˆ</button>
        <button class="button secondary-button" id="clear-records" style="display: none;">æ¸…é™¤è®°å½•</button>
    </div>
    
    <script>
        // è·å–è®°å½•
        function loadRecords() {
            const recordsJSON = localStorage.getItem('gameRecords');
            return recordsJSON ? JSON.parse(recordsJSON) : [];
        }
        
        // éš¾åº¦åç§°æ˜ å°„
        const difficultyNames = {
            'explore': 'æ¢ç´¢æ¨¡å¼',
            'adventure': 'å†’é™©æ¨¡å¼',
            'challenge': 'æŒ‘æˆ˜æ¨¡å¼'
        };
        
        // æ˜¾ç¤ºè®°å½•
        function displayRecords() {
            const records = loadRecords();
            const container = document.getElementById('records-container');
            const clearButton = document.getElementById('clear-records');
            
            if (records.length === 0) {
                container.innerHTML = `
                    <div class="no-records">
                        <div class="no-records-icon">ğŸš€</div>
                        <p class="no-records-text">ä½ è¿˜æ²¡æœ‰ä»»ä½•æ¢é™©è®°å½•</p>
                        <button class="button" id="start-game">å¼€å§‹æ¢é™©</button>
                    </div>
                `;
                
                document.getElementById('start-game').addEventListener('click', () => {
                    window.location.href = 'difficulty.html';
                });
                
                clearButton.style.display = 'none';
            } else {
                // å¤åˆ¶å¹¶æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€æ–°åœ¨å‰ï¼‰
                const sortedRecords = [...records].sort((a, b) => b.date - a.date);
                
                // æ‰¾å‡ºæœ€ä½³è®°å½•ï¼ˆæˆåŠŸçš„è®°å½•ä¸­ç”¨æ—¶æœ€å°‘çš„ï¼‰
                const successRecords = sortedRecords.filter(r => r.success);
                let bestRecord = null;
                if (successRecords.length > 0) {
                    bestRecord = successRecords.reduce((best, current) => 
                        current.timeUsed < best.timeUsed ? current : best, successRecords[0]);
                }
                
                let recordsHTML = '<div class="records-list">';
                
                sortedRecords.forEach((record, index) => {
                    const isBest = bestRecord && record.date === bestRecord.date;
                    const formattedDate = new Date(record.date).toLocaleString();
                    const difficultyName = difficultyNames[record.difficulty] || record.difficulty;
                    
                    recordsHTML += `
                        <div class="record-card">
                            ${isBest ? '<div class="record-rank">æœ€ä½³è®°å½•</div>' : ''}
                            <div class="record-status ${record.success ? 'status-success' : 'status-failure'}">
                                ${record.success ? 'æˆåŠŸ' : 'æœªå®Œæˆ'}
                            </div>
                            <div class="record-header">
                                <div class="record-date">${formattedDate}</div>
                                <div class="record-difficulty difficulty-${record.difficulty}">${difficultyName}</div>
                            </div>
                            <div class="record-total-time">${record.timeUsed} ç§’</div>
                            ${record.success ? `<div class="record-stars">${'â­'.repeat(record.stars)}</div>` : ''}
                            <div class="record-stats">
                                <div class="stat-item">
                                    <span class="stat-label">å®Œæˆç‡</span>
                                    <span class="stat-value">${record.completionRate}%</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">é…å¯¹</span>
                                    <span class="stat-value">${record.matchedPairs}/${record.totalPairs}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                recordsHTML += '</div>';
                container.innerHTML = recordsHTML;
                clearButton.style.display = 'block';
            }
        }
        
        // è¿”å›æ¸¸æˆ
        document.getElementById('back-to-game').addEventListener('click', () => {
            window.location.href = 'difficulty.html';
        });
        
        // æ¸…é™¤è®°å½•
        document.getElementById('clear-records').addEventListener('click', () => {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ¸¸æˆè®°å½•å—ï¼Ÿè¿™ä¸ªæ“ä½œæ— æ³•æ’¤é”€ï¼')) {
                localStorage.removeItem('gameRecords');
                displayRecords();
            }
        });
        
        // åˆå§‹åŒ–
        displayRecords();
    </script>
</body>
</html> 